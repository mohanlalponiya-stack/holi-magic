<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Holi AI Magic - ‡§Ö‡§™‡§®‡•Ä ‡§´‡•ã‡§ü‡•ã ‡§ï‡•ã ‡§∞‡§Ç‡§ó‡•Ä‡§® ‡§¨‡§®‡§æ‡§è‡§Ç</title>
    <!-- Tailwind CSS for Styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React and Babel for running code in browser -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #050505; color: white; }
        .blur-bg { filter: blur(100px); opacity: 0.2; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useRef, useEffect } = React;

        const App = () => {
            const [originalImage, setOriginalImage] = useState(null);
            const [processedImage, setProcessedImage] = useState(null);
            const [isProcessing, setIsProcessing] = useState(false);
            const [scrolled, setScrolled] = useState(false);
            const fileInputRef = useRef(null);
            const editorRef = useRef(null);
            const apiKey = ""; // API key gets handled by the environment

            useEffect(() => {
                const handleScroll = () => setScrolled(window.scrollY > 50);
                window.addEventListener('scroll', handleScroll);
                return () => window.removeEventListener('scroll', handleScroll);
            }, []);

            const applyAiHoliMagic = async (imageUri) => {
                setIsProcessing(true);
                const base64Data = imageUri.split(',')[1];
                const prompt = "Apply artistic Holi festival colors to this photo. Add vibrant gulal powder splashes on faces and clothes. Make the atmosphere joyful and festive with colorful dust clouds while keeping features realistic.";

                try {
                    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-image-preview:generateContent?key=${apiKey}`, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            contents: [{ parts: [{ text: prompt }, { inlineData: { mimeType: "image/png", data: base64Data } }] }],
                            generationConfig: { responseModalities: ['TEXT', 'IMAGE'] }
                        })
                    });

                    const result = await response.json();
                    const base64 = result.candidates?.[0]?.content?.parts?.find(p => p.inlineData)?.inlineData?.data;
                    if (base64) setProcessedImage(`data:image/png;base64,${base64}`);
                } catch (err) {
                    console.error("AI Error:", err);
                } finally {
                    setIsProcessing(false);
                }
            };

            const handleUpload = (e) => {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (ev) => {
                        setOriginalImage(ev.target.result);
                        setProcessedImage(null);
                        applyAiHoliMagic(ev.target.result);
                        editorRef.current?.scrollIntoView({ behavior: 'smooth' });
                    };
                    reader.readAsDataURL(file);
                }
            };

            return (
                <div className="relative">
                    {/* Background decoration */}
                    <div className="fixed inset-0 pointer-events-none z-0">
                        <div className="absolute top-0 left-0 w-96 h-96 bg-pink-600 blur-bg rounded-full"></div>
                        <div className="absolute bottom-0 right-0 w-96 h-96 bg-yellow-500 blur-bg rounded-full"></div>
                    </div>

                    {/* Nav */}
                    <nav className={`fixed top-0 w-full z-50 transition-all ${scrolled ? 'bg-black/80 backdrop-blur-md py-4 shadow-lg' : 'bg-transparent py-6'}`}>
                        <div className="max-w-7xl mx-auto px-6 flex justify-between items-center">
                            <h1 className="text-2xl font-black italic tracking-tighter">HOLI<span className="text-pink-500">AI</span></h1>
                            <button onClick={() => editorRef.current?.scrollIntoView({behavior:'smooth'})} className="bg-white text-black px-6 py-2 rounded-full font-bold text-xs uppercase tracking-widest hover:scale-105 transition">Start Magic</button>
                        </div>
                    </nav>

                    {/* Hero */}
                    <section className="relative pt-48 pb-20 px-6 text-center">
                        <h1 className="text-6xl md:text-8xl font-black mb-6 leading-tight uppercase italic">‡§∞‡§Ç‡§ó‡•ã‡§Ç ‡§ï‡§æ <span className="text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-pink-600">‡§ú‡§æ‡§¶‡•Ç</span></h1>
                        <p className="text-gray-400 max-w-xl mx-auto mb-10 text-lg">‡§∏‡§ø‡§∞‡•ç‡§´ ‡§è‡§ï ‡§´‡•ã‡§ü‡•ã ‡§î‡§∞ ‡§π‡§Æ‡§æ‡§∞‡§æ AI ‡§¨‡§®‡§æ ‡§¶‡•á‡§ó‡§æ ‡§â‡§∏‡•á ‡§Ø‡§æ‡§¶‡§ó‡§æ‡§∞! ‡§Ö‡§¨ ‡§¨‡§ø‡§®‡§æ ‡§Ö‡§∏‡§≤‡•Ä ‡§∞‡§Ç‡§ó ‡§≤‡§ó‡§æ‡§è ‡§ñ‡•á‡§≤‡•á‡§Ç ‡§π‡•ã‡§≤‡•Ä‡•§</p>
                        <button onClick={() => fileInputRef.current.click()} className="bg-pink-600 px-10 py-5 rounded-3xl font-black text-xl shadow-2xl shadow-pink-600/30 hover:bg-pink-500 transition-all">‡§´‡•ã‡§ü‡•ã ‡§Ö‡§™‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç üì∏</button>
                        <input type="file" ref={fileInputRef} onChange={handleUpload} className="hidden" accept="image/*" />
                    </section>

                    {/* Editor */}
                    <section ref={editorRef} className="py-20 px-6">
                        <div className="max-w-4xl mx-auto bg-neutral-900/50 backdrop-blur-xl border border-white/10 rounded-[3rem] p-8 md:p-12 shadow-2xl">
                            <div className="aspect-square md:aspect-video bg-black/50 rounded-[2.5rem] border-2 border-dashed border-white/10 flex items-center justify-center relative overflow-hidden">
                                {!originalImage ? (
                                    <div className="text-center opacity-40">
                                        <div className="w-20 h-20 bg-white/5 rounded-full flex items-center justify-center mx-auto mb-4">‚ú®</div>
                                        <p>‡§Ü‡§™‡§ï‡•Ä ‡§´‡•ã‡§ü‡•ã ‡§Ø‡§π‡§æ‡§Å ‡§¶‡§ø‡§ñ‡•á‡§ó‡•Ä</p>
                                    </div>
                                ) : (
                                    <div className="w-full h-full relative">
                                        <img src={processedImage || originalImage} className={`w-full h-full object-cover transition-all duration-1000 ${isProcessing ? 'blur-2xl opacity-50' : 'blur-0'}`} />
                                        {isProcessing && (
                                            <div className="absolute inset-0 flex flex-col items-center justify-center bg-black/20">
                                                <div className="w-12 h-12 border-4 border-pink-500 border-t-transparent rounded-full animate-spin mb-4"></div>
                                                <p className="font-bold tracking-widest uppercase text-xs">AI ‡§∞‡§Ç‡§ó ‡§≤‡§ó‡§æ ‡§∞‡§π‡§æ ‡§π‡•à...</p>
                                            </div>
                                        )}
                                        {!isProcessing && processedImage && (
                                            <div className="absolute bottom-6 right-6">
                                                <button onClick={() => {
                                                    const a = document.createElement('a');
                                                    a.href = processedImage;
                                                    a.download = 'holi_ai_photo.png';
                                                    a.click();
                                                }} className="bg-white text-black px-8 py-3 rounded-2xl font-bold flex items-center gap-2 hover:scale-105 transition shadow-xl">‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç ‚¨áÔ∏è</button>
                                            </div>
                                        )}
                                    </div>
                                )}
                            </div>
                        </div>
                    </section>

                    <footer className="py-20 text-center opacity-30 text-xs tracking-[0.3em] uppercase">
                        Made with ‚ù§Ô∏è for Holi 2026
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>

