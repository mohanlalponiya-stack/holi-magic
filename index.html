<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Holi AI Magic</title>

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

<style>
body{
  background:#050505;
  color:white;
  font-family:system-ui, sans-serif;
}
</style>
</head>

<body>
<div id="root"></div>

<script type="text/babel">
const { useState } = React;

function App(){
  const [shayari,setShayari] = useState("");
  const [loading,setLoading] = useState(false);
  const [error,setError] = useState(null);

  const getShayari = async () => {
    try{
      setLoading(true);
      setError(null);
      setShayari("");

      const res = await fetch("/api/gemini",{
        method:"POST",
        headers:{ "Content-Type":"application/json" },
        body: JSON.stringify({
          model: "gemini-1.5-flash",
          payload: {
            contents:[
              { parts:[{ text:"‡§π‡•ã‡§≤‡•Ä ‡§™‡§∞ ‡§è‡§ï ‡§∏‡•Å‡§Ç‡§¶‡§∞ 2 ‡§≤‡§æ‡§á‡§® ‡§ï‡•Ä ‡§∂‡§æ‡§Ø‡§∞‡•Ä ‡§≤‡§ø‡§ñ‡•ã" }] }
            ]
          }
        })
      });

      const text = await res.text();
      if(!res.ok) throw new Error(text);

      const data = JSON.parse(text);
      setShayari(data.candidates[0].content.parts[0].text);

    }catch(e){
      setError(e.message);
    }finally{
      setLoading(false);
    }
  };

  return (
    <div className="min-h-screen flex flex-col items-center justify-center gap-6 p-6 text-center">
      <h1 className="text-4xl font-black">üé® Holi AI Magic</h1>

      <button
        onClick={getShayari}
        className="px-6 py-3 bg-pink-600 rounded-xl font-bold"
      >
        ‡§∂‡§æ‡§Ø‡§∞‡•Ä ‡§¨‡§®‡§æ‡§è‡§Ç
      </button>

      {loading && <p className="opacity-70">AI ‡§ï‡§æ‡§Æ ‡§ï‡§∞ ‡§∞‡§π‡§æ ‡§π‡•à...</p>}

      {shayari && (
        <p className="text-xl italic text-pink-300 max-w-md">
          ‚Äú{shayari}‚Äù
        </p>
      )}

      {error && (
        <pre className="text-red-400 text-xs whitespace-pre-wrap max-w-md">
{error}
        </pre>
      )}
    </div>
  );
}

ReactDOM.createRoot(document.getElementById("root")).render(<App/>);
</script>
</body>
</html>
